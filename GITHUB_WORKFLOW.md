# ã“ã‚“ã ã¦Loop GitHubé‹ç”¨ãƒ«ãƒ¼ãƒ«EEenHubå‰æEE

ã“ãEãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãEã€ã“ã‚“ã ã¦LoopEEsystems/private/kondate-loop`E‰ãEGitHubé‹ç”¨ã‚E
ã€Œè»½é‡ãEè¿·ã‚ãªãE€ã“ã¨ã‚’å„ªå…ˆã—ã¦å®šç¾©ã—ãŸã‚‚ãEã§ã™ã€E

## ç›®æ¬¡
- [1. ç›®çšE¨å‰æ](#1-ç›®çšE¨å‰æ)
- [2. ãƒ–ãƒ©ãƒ³ãƒæ§‹æE](#2-ãƒ–ãƒ©ãƒ³ãƒæ§‹æE)
- [3. Issueé‹ç”¨EEenHubE‰](#3-issueé‹ç”¨zenhub)
- [4. ä½œæ¥­é–‹å§‹ãEæ‰‹é E¼ˆæ¨™æº–ï¼‰](#4-ä½œæ¥­é–‹å§‹ãEæ‰‹é E¨™æºE
- [5. PRé‹ç”¨ãƒ«ãƒ¼ãƒ«](#5-pré‹ç”¨ãƒ«ãƒ¼ãƒ«)
- [6. ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼EEev â†EmainE‰](#6-ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼dev--main)
- [7. ãƒ–ãƒ©ãƒ³ãƒãEç‰E»˜ã‘Eˆå¿E ˆï¼‰](#7-ãƒ–ãƒ©ãƒ³ãƒãEç‰E»˜ã‘å¿E E
- [8. ãƒ­ãƒ¼ã‚«ãƒ«é‹ç”¨ã®çE§£Eˆã‚ˆãã‚ã‚‹ç–‘å•ï¼‰](#8-ãƒ­ãƒ¼ã‚«ãƒ«é‹ç”¨ã®çE§£ã‚ˆãã‚ã‚‹ç–‘å•)
- [9. ä¾‹å¤–ãƒ«ãƒ¼ãƒ«Eˆã‚„ã‚€ã‚’å¾—ãªãE¨ãï¼‰](#9-ä¾‹å¤–ãƒ«ãƒ¼ãƒ«ã‚EEã‚’å¾—ãªãE¨ãE
- [10. ãƒã‚§ãƒE‚¯ãƒªã‚¹ãƒˆï¼ˆæœ€å°ï¼‰](#10-ãƒã‚§ãƒE‚¯ãƒªã‚¹ãƒˆæœ€å°E
- [11. ãƒªãƒã‚¸ãƒˆãƒªç§»ç®¡ã¨ãƒ­ãƒ¼ã‚«ãƒ«æ›´æ–°Eˆæœ€æ–°E‰](#11-ãƒªãƒã‚¸ãƒˆãƒªç§»ç®¡ã¨ãƒ­ãƒ¼ã‚«ãƒ«æ›´æ–°æœ€æ–°)

## 1. ç›®çšE¨å‰æ
- 2äººé–‹ç™ºã§ã‚‚è¿·ã‚ãªãE‹ç”¨ã‚’æœ€å„ªå…E
- ä½™è¨ˆãªç®¡çEEå¢—ã‚„ã•ãªãE¼ˆæœ€å°é™EE
- ZenHubã®ãƒœãEãƒ‰ã‚’ä½¿ãE
- Issueã‚’èµ·ç‚¹ã«ä½œæ¥­ã™ã‚‹

## 2. ãƒ–ãƒ©ãƒ³ãƒæ§‹æE
- `main` : æœ¬ç•ªEˆå®‰å®šç‰ˆEE
- `dev` : ãƒ—ãƒ¬æœ¬ç•ª / çµ±åˆæ¤œè¨¼
- `feature/*` : å€‹åˆ¥ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒE¼ˆå¿Eš `dev` ã‹ã‚‰ä½œæEEE
- `hotfix/*` : æœ¬ç•ªç·Šæ€¥ä¿®æ­£EEmain` ã‹ã‚‰ä½œæEã—ã¦ `main` ã¨ `dev` ã«åæ˜ EE

## 3. Issueé‹ç”¨EEenHubEE
### ãƒœãEãƒ‰åEEˆæœ€å°ï¼E
- `Backlog`Ešã„ã¤ã‹ã‚„ã‚E
- `Sprint`Ešä»Šé€±ã‚E‚‹
- `In Progress`Ešç€æ‰‹ä¸­
- `Review`EšPRãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­
- `Done`Eš`dev` ã«ãƒãEã‚¸æ¸E

### æœ€å°ãƒ«ãƒ¼ãƒ«
- ä½œæ¥­ã¯ **å¿EšIssueã‹ã‚‰é–‹å§E*
- Issueã¯ZenHubãƒœãEãƒ‰ä¸Šã§ç®¡çE
- PRã¯å¿EšIssueã¨ç´ä»˜ã‘ã‚‹ï¼ECloses #<issueç•ªå·>`EE

### ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ›´æ–°Eˆå¿E ˆï¼E
- PRä½œæEæ™‚ã«Issueã‚E`Review` ã«ç§»å‹E
- `dev` ã¸ãƒãEã‚¸å¾Œã«Issueã‚E`Done` ã«ç§»å‹E
- è‡ªå‹•åŒ–ã™ã‚‹å ´åˆãE `scripts/zenhub-move-issue.sh` ã‚’ä½¿ç”¨EEZENHUB_TOKEN` ãŒå¿E¦E¼E

## 4. ä½œæ¥­é–‹å§‹ãEæ‰‹é E¼ˆæ¨™æº–ï¼E
å¿Eš **æœ€æ–°ã® `dev` ã‚’åŸºæºE*ã« `feature/*` ã‚’åEã‚‹ã€E

```bash
git fetch --prune
git switch dev
git pull
git switch -c feature/<issueç•ªå·>-<çŸ­ãEª¬æ˜E
```

## 5. PRé‹ç”¨ãƒ«ãƒ¼ãƒ«
- `feature/*` â†E`dev` ã¯ **å¿EšPR** ã§å–ã‚Šè¾¼ã‚€
- `dev` â†E`main` ã‚E**å¿EšPR** ã§å–ã‚Šè¾¼ã‚€
- `dev` / `main` ã« **ç›´æ¥pushã—ãªãE*
- PRæœ¬æ–E« `Closes #<issueç•ªå·>` ã‚’åEã‚Œã‚‹

## 6. ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼EEev â†EmainEE
- `feature/*` ã®PRã‚E**è¤E•° `dev` ã«å–ã‚Šè¾¼ã‚“ã§OK**
- ã¾ã¨ã¾ã£ãŸã‚‰ **`dev` â†E`main` ã‚’PR**
- `main` ã«ã‚¿ã‚°ã‚’ä»˜ã‘ã‚‹ï¼ˆä¾E `v0.1.0`EE

## 7. ãƒ–ãƒ©ãƒ³ãƒãEç‰E»˜ã‘Eˆå¿E ˆï¼E
- **PRãƒãEã‚¸å¾ŒãEä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤ã™ã‚‹**
- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ»ãƒªãƒ¢ãƒ¼ãƒˆä¸¡æ–¹ã‚’å‰Šé™¤ã™ã‚‹

ä¾E
```bash
git branch -D feature/xxx
git push origin --delete feature/xxx
```

## 8. ãƒ­ãƒ¼ã‚«ãƒ«é‹ç”¨ã®çE§£Eˆã‚ˆãã‚ã‚‹ç–‘å•ï¼E
- ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚E`main` / `dev` ã¯å­˜åœ¨ã™ã‚‹
- ã“ã‚Œã‚‰ãE **ã€Œæœ€æ–°ã‚’ç¢ºèªã™ã‚‹ãŸã‚ãEå†™ã—ã€E*
- ä½œæ¥­ã¯ **å¿Eš `feature/*`** ã§è¡Œã†
- ãƒ­ãƒ¼ã‚«ãƒ« `main` / `dev` ã¯æ”¾ç½®ã™ã‚‹ã¨å¤ããªã‚‹ãEã§ã€å¿E¦æ™‚ã« `pull` ã§æ›´æ–°ã™ã‚‹

## 9. ä¾‹å¤–ãƒ«ãƒ¼ãƒ«Eˆã‚„ã‚€ã‚’å¾—ãªãE¨ãï¼E
- åŸå‰‡ã¯PRé‹ç”¨ã ãŒã€E*ç·Šæ€¥æ™‚ãEã¿ä¾‹å¤–ã§ç›´æ¥pushã‚’è¨±å¯**
- ä¾‹å¤–ã‚’ä½¿ã£ãŸå ´åˆãEã€E*å¿EšçE”±ã¨æ—¥æ™‚ã‚’è¨˜éŒ²**ã™ã‚‹

## 10. ãƒã‚§ãƒE‚¯ãƒªã‚¹ãƒˆï¼ˆæœ€å°ï¼E
- [ ] Issueã‚’ä½œæEã—ãŸ
- [ ] `feature/*` ã‚E`dev` ã‹ã‚‰ä½œæEã—ãŸ
- [ ] PRã« `Closes #<issueç•ªå·>` ã‚’åEã‚ŒãŸ
- [ ] `feature/*` â†E`dev` ã‚’PRã§å–ã‚Šè¾¼ã‚“ã 
- [ ] å¿E¦ã«å¿œã˜ã¦ `dev` â†E`main` ã‚’PRã—ãŸ
- [ ] ãƒãEã‚¸å¾Œã«ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤ã—ãŸ

## 11. ãƒªãƒã‚¸ãƒˆãƒªç§»ç®¡ã¨ãƒ­ãƒ¼ã‚«ãƒ«æ›´æ–°Eˆæœ€æ–°EE
ä½œæ¥­å ´æ‰€ãŒç¢ºå®šã—ãŸãŸã‚ã€å‚ç…§å…ERLã¨remoteæ›´æ–°æ‰‹é E‚’æœ€æ–°åŒ–ã™ã‚‹ã€‚ä»¥å¾Œã“ã®URLã®ã¿ã‚’æ­£ã¨ã™ã‚‹ã€E

- æ–°ã—ã„ä½œæ¥­å ´æ‰€: https://github.com/kondate-team/kondate-loop
- ç§»ç®¡å¾ŒãEãƒ­ãƒ¼ã‚«ãƒ«ã®remoteã‚’æ›´æ–°ã™ã‚‹

```bash
git remote set-url origin git@github.com:kondate-team/kondate-loop.git
```

å…±åŒä½œæ¥­è€E«ã‚‚ã€ãƒªãƒã‚¸ãƒˆãƒªç§»ç®¡ã¨remoteæ›´æ–°ã‚’å¿Ešå…±æœ‰ã™ã‚‹ã€E

## Deploy templates (CloudFormation)

- Dev templates: infra/aws-resources/kondate-loop-iam-github-oidc-stack.yaml, infra/aws-resources/kondate-loop-iam-LambdaExecutionRole-stack.yaml, infra/aws-resources/kondate-loop-iam-stack.yaml, infra/aws-resources/kondate-loop-backend-stack.yaml, infra/aws-resources/kondate-loop-infra-stack.yaml.
- Prod templates: infra/aws-resources/PROD/PRODkondate-loop-backend-stack.yaml, infra/aws-resources/PROD/PRODkondate-loop-infra-stack.yaml.
- Default buckets (if vars unset): dev frontend kondate-loop-dev-s3-web-211669976488-ap-northeast-1, prod frontend kondate-prod-s3-web-211669976488-ap-northeast-1, artifacts kondate-loop-infra-s3-artifacts-211669976488-ap-northeast-1.
- Backend stack names: dev kondate-loop-backend-stack, prod PRODkondate-loop-backend-stack.
- kondate-loop-iam-stack.yaml (dev) requires DEVELOPER_PRINCIPAL_ARN (secret or var); if unset, the workflow skips that stack.




