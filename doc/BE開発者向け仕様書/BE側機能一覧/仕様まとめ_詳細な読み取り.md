# 契約凍結シート（FEとBEの手戻り防止）

ユーザー: いつき
作成日時: 2026年1月26日 17:50

- 参照プロト：https://1212ki.github.io/kondate-loop-proto/
- 作成日：2026-01-27
- 更新日：2026-01-28
- バージョン：v1.0（MVP）
- このシートで凍結する範囲：DB / API / 権限 / 状態遷移 / 集計ロジック
- UIで凍結しない範囲：配置・余白・見た目・アニメーション・文言微調整（ただしcode/enumは除く）

# **0. 今回のスコープ宣言**

- 対象リリース：**MVP**
- アプリ形態：**Webのみ**
- データの正：**サーバー正**（現状はMockで代替）
- オフライン要件：**不要**
- 多端末同期：**できれば**
- 共有：**個人（レシピ帳）＋公開（カタログ）**

---

# 1. コア体験（凍結対象のユーザージャーニー）

## 1-1. メイン導線（プロトの3ステップ）

1. セットを選ぶ
2. 買い物する（買い物リストを出す）
3. リストから選んで作る（作った管理・履歴へ）

## 1-2. 主要画面（ユースケース→APIに変換する）

- 献立表（現在の献立/手札）
- セット選択
- セット作成（既存から複製して編集も含む）
- レシピ追加（URL/テキスト取り込み含む）
- 買い物リスト
- 冷蔵庫
- レシピ帳（自分のレシピ/セット）
- レシピカタログ（外部コンテンツ）
- マイページ（ダッシュボード/設定/支払い/購入履歴/通知）
- アーカイブ（料理カレンダー＋料理ログ）
- ~~診断（料理履歴→傾向メモ生成）~~ → **MVP外**

---

# 2. ロール/権限（アカウントタイプ）凍結

## 2-1. ロール定義

| ロール | 説明 | MVP対象 |
|--------|------|---------|
| user | 自分の献立を整える（無料） | ✅ |
| user_plus | userと同等（月額500円） | ✅ |
| creator | セットを公開して届ける（買い切り1,200円） | ❌ |
| creator_plus | 有料セットを配信（月額800円） | ❌ |
| ゲスト | ログインなし：**なし（ログイン必須）** | - |

※外部共有リンクの閲覧はゲスト（認証不要）でアクセス可能

## 2-2. 権限マトリクス（◯/×/条件付き）

| 操作 | user | user_plus | creator | creator_plus | ゲスト |
|------|------|-----------|---------|--------------|--------|
| 自分のレシピ作成/編集 | ○ | ○ | ○ | ○ | × |
| 自分のセット作成/編集 | ○ | ○ | ○ | ○ | × |
| レシピ帳へ保存 | ○ | ○ | ○ | ○ | × |
| 献立にセット適用 | ○ | ○ | ○ | ○ | × |
| 買い物リスト生成/編集 | ○ | ○ | ○ | ○ | × |
| 冷蔵庫の編集 | ○ | ○ | ○ | ○ | × |
| レシピ/セットをカタログへ公開 | × | × | ○ | ○ | × |
| 公開ルール「有料」を選べる | × | × | △ | ○ | × |
| 決済手段の登録/変更 | ○ | ○ | ○ | ○ | × |
| 購入（有料セット） | ○ | ○ | ○ | ○ | × |
| 外部共有リンク閲覧 | - | - | - | - | ○ |

---

# 3. 共通の技術契約（ID/日時/削除/整合性）

| 項目 | 確定値 |
|------|--------|
| ID方式 | **ULID** |
| 日時 | ISO8601 + TZ（createdAt/updatedAt は必須） |
| ソフトデリート | 採用する（deletedAt） |
| 並び順 | ingredients/steps/intermediateMaterials は order を持つ |
| 画像/ファイル | S3 + 署名URL / 上限サイズ: **5MB** |
| 数量（quantity）型 | **string**（Ingredient/ShoppingItem/FridgeItem で統一） |

**数量型の統一理由**:
- レシピ材料には「少々」「適量」など数値化できない表現がある
- 買い物リスト・冷蔵庫はレシピ材料から生成されるため、型を揃える
- 計算が必要な場面ではパースして処理、できなければスキップ

---

# 4. データモデル凍結（エンティティごと）

## 4-1. User（ユーザー）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| cognitoSub | string | ✅ | Cognito User Pool Sub |
| email | string | ✅ | メールアドレス |
| name | string | ✅ | 表示名 |
| role | enum | ✅ | user / user_plus / creator / creator_plus |
| avatarUrl | string | - | プロフィール画像URL |
| createdAt | datetime | ✅ | |
| updatedAt | datetime | ✅ | |
- 
- 認証：メール/パスワード / OAuth / マジックリンク / なし（選択）
    - セッション管理（JWT/Cookie）やrefreshの扱い
---
## 4-2. Recipe（レシピ）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| ownerId | string | ✅ | 作成者のuserId |
| title | string | ✅ | 料理名（最大80文字） |
| authorName | string | - | 出典（作成者名） |
| sourceUrl | string | - | 出典URL |
| thumbnailUrl | string | - | サムネイル画像URL |
| servings | number | ✅ | 何人前（整数: 1, 2, 3, 4...） |
| cookTimeMinutes | number | - | 調理時間（分） |
| ingredients | array | ✅ | 材料リスト（最低1つ） |
| intermediateMaterials | array | - | 中間素材（タレ/合わせ調味料） |
| steps | array | ✅ | 作り方（最低1つ） |
| tags | array | - | タグ（最大10件） |
| savedCount | number | - | 保存数（人気指標） |
| origin | enum | ✅ | created / saved |
| createdAt | datetime | ✅ | |
| updatedAt | datetime | ✅ | |

**制約**:
- title最大文字数: **80**
- ingredients最大件数: **50**
- steps最大件数: **30**
- tags最大件数: **10**

**検索対象フィールド**: title, tags, authorName

---

### Ingredient（材料）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| name | string | ✅ | 材料名 |
| quantity | string | - | 数量（文字列で保持: "2", "少々", "適量"） |
| unit | string | - | 単位（**自由入力**） |
| note | string | - | メモ |
| order | number | ✅ | 表示順 |

- 正規化ルール（合算・在庫差分に影響）
    - trim（前後空白除去）：する
    - 全角半角：統一する/しない
    - 同義語（例：ねぎ/長ねぎ）：扱わない（MVPは扱わない推奨）
- 

### IntermediateMaterial（中間素材）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| title | string | ✅ | 素材名（例: 甘辛だれ） |
| text | string | ✅ | 内容（例: 醤油/みりん/砂糖） |
| order | number | ✅ | 表示順 |

**形式**: **A：テキストブロック（title + text）** を採用

---

### Step（手順）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| order | number | ✅ | 手順番号 |
| text | string | ✅ | 手順内容 |
| timerMinutes | number | - | タイマー（分） |

---

## 4-3. RecipeSet（セット）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| ownerId | string | ✅ | 作成者のuserId |
| title | string | ✅ | セット名（最大80文字） |
| authorName | string | - | 出典（作成者名） |
| description | string | - | セット概要 |
| thumbnailUrl | string | - | サムネイル画像URL |
| recipeIds | array | ✅ | 含まれるレシピID（1〜7品） |
| tags | array | - | タグ |
| savedCount | number | - | 保存数 |
| origin | enum | ✅ | created / saved |
| createdAt | datetime | ✅ | |
| updatedAt | datetime | ✅ | |

**セット適用の挙動**:
- 適用すると献立は: **置換**
- 重複レシピ: **許可**

---

## 4-4. Plan（献立表/手札）

### 2枠運用（current / next）

- 献立（Plan/セット）はユーザーごとに常に「current（現在）」「next（次）」の2枠で管理
- current（現在の献立）: いま作る献立、作ったトグル対象、買い物リスト生成基準
- next（次の献立）: 次に切り替える候補、プレビュー枠

**枠の不変条件**:
- 1ユーザーにつき current は最大1つ、next も最大1つ
- current/next は空（null）を許可
- current が空の場合、作ったトグル・買い物生成は不可

### PlanItem

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| recipeId | string | ✅ | レシピID |
| title | string | ✅ | レシピ名（非正規化） |
| thumbnailUrl | string | - | サムネイル（非正規化） |
| isCooked | boolean | ✅ | 作った状態 |
| cookedAt | datetime | - | 作った日時 |

### 「次の献立へ」操作（advance）

- next が存在する場合: next を current に昇格
- 昇格と同時に PlanItem は全て isCooked: false でリセット
- 昇格後の next は空にする
- next が空の状態では advance できない


- 「次の献立」ボタンの仕様（凍結）
    - 生成方法：レシピ帳またはカタログから選ぶ、最初はレシピ帳が開く
    - 生成対象：レシピ帳とカタログどちらもから
    - 生成数：1件～7件
    - https://chatgpt.com/s/t_69788e2742088191ba6c549f6f6c175e
---

## 4-5. ShoppingList（買い物リスト）

### ShoppingItem

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| name | string | ✅ | 食材名 |
| quantity | string | - | 数量（文字列で保持: "2", "100g", "少々"） |
| unit | string | - | 単位 |
| checked | boolean | ✅ | チェック状態 |
| source | enum | ✅ | auto / manual |

**生成元**: 現在の献立（current）の全レシピ

**生成タイミング**: **買い物リストを表示する時**（都度生成）
- 献立設定時ではなく、買い物リスト画面を開いた時に生成
- これにより、献立設定後に冷蔵庫へ食材を追加しても反映される
- 手動追加アイテム（source: manual）は永続化し、再生成時も保持

**合算ルール**:
- 同一判定キー: **name + unit**
- 単位違い: **別行で表示**
- 冷蔵庫在庫: **単位一致時は差し引く**（MVPで実装）

**「買い物完了！」の仕様**:
- チェック済み食材を冷蔵庫へ移動
- 未チェック食材は残る

**「冷蔵庫にある食材」セクション（UI）**:
- 買い物リストと冷蔵庫に**同じ食材があるが単位が異なる場合**に表示
- 買い物リスト画面の「追加」欄の下に「🏠 冷蔵庫にある食材」セクションとして表示
- 該当食材を数量・単位付きで参考情報として表示
- ユーザーが自分で数量を判断して調整する

---

## 4-6. Fridge（冷蔵庫）

### FridgeItem

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| name | string | ✅ | 食材名 |
| quantity | string | - | 数量（文字列で保持: "2", "100g", "半分"） |
| unit | string | - | 単位（**自由入力**） |
| note | string | - | メモ（賞味期限など） |
| source | enum | ✅ | auto / manual |
| updatedAt | datetime | ✅ | |
| deletedAt | datetime | - | 削除日時（30日間保持） |

**単位の候補**: 個/g/本/枚/パック/袋/丁/切れ/束/かけ…＋**自由入力可**

**在庫差分**: **単位一致時は差し引く**（MVPで実装）
**単位換算**: **しない**（MVPはしない）

**削除履歴**: 30日間保持、その後自動削除

**買い物リストとの連携**:
- 単位一致: 冷蔵庫から差し引き、不足分のみ買い物リストに追加
- 単位不一致: 差し引きせず、「🏠 冷蔵庫にある食材」セクションに参考表示

---
## 4-7. CookingLog / Archive（料理ログ・アーカイブ）

### CookingLog

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| userId | string | ✅ | ユーザーID |
| date | string | ✅ | 日付（YYYY-MM-DD） |
| recipeId | string | ✅ | レシピID |
| recipeTitle | string | ✅ | レシピ名（非正規化） |
| recipeThumbnailUrl | string | - | サムネイル（非正規化） |
| createdAt | datetime | ✅ | |

**DynamoDBキー設計**:
- PK: `USER#<userId>`
- SK: `LOG#<date>#<id>`

**自動記録**: 「作った」押下時に自動作成
**写真/コメント**: 将来対応（MVP外）

**アーカイブ表示**: カレンダー月単位

---
**4-8. CatalogPublish（レシピ/セットのカタログ公開）**

> **MVPでは実装しない**（公式レシピは直接DB投入）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| targetType | enum | ✅ | recipe / set |
| targetId | string | ✅ | 対象ID |
| publisherId | string | ✅ | 公開者（creator） |
| visibility | enum | ✅ | free / paid / member_only |
| price | number | - | 価格（paid時必須） |
| tags | array | - | タグ |
| status | enum | ✅ | published / stopped / draft |
| publishedAt | datetime | - | 公開日時 |

**「公開を停止」挙動**: 検索結果から非表示、詳細は見れる、共有URLは無効化

---
## 4-9. ExternalShare（外部共有）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| targetType | enum | ✅ | recipe / set |
| targetId | string | ✅ | 対象ID |
 
**制約**: authorName か sourceUrl の**どちらか必須**

**共有URL形式**:
- `/share/recipe/{recipeId}`
- `/share/set/{setId}`

**ライフサイクル**:
- レシピ/セットが存在する → 共有URLも有効
- レシピ/セットを削除 → 共有URLも無効（404）

---

## 4-10. CreatorProfile / Application（公開準備・申請）

> **MVPでは実装しない**

---

## 4-11. Membership（料理家のメンバーシップ）

> **MVPでは実装しない**

---
## 4-12. Payment / Purchase（支払い・購入履歴）

### PaymentMethod（Stripe）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | Stripe PaymentMethod ID |
| brand | string | ✅ | カードブランド |
| last4 | string | ✅ | 下4桁 |
| expMonth | number | ✅ | 有効期限（月） |
| expYear | number | ✅ | 有効期限（年） |
| isDefault | boolean | ✅ | デフォルトか |

### Purchase

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| userId | string | ✅ | 購入者ID |
| itemType | enum | ✅ | recipe / set |
| itemId | string | ✅ | 対象ID |
| itemTitle | string | ✅ | タイトル（非正規化） |
| amount | number | ✅ | 金額 |
| currency | string | ✅ | 通貨（JPY） |
| status | enum | ✅ | succeeded / failed / refunded |
| purchasedAt | datetime | ✅ | 購入日時 |

**決済プロバイダー**: **Stripe**
**BillingHistory**: Purchaseのビューで表示

---

## 4-13. Notification（通知）

### Notification

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| recipientId | string | ✅ | 受信者userId |
| type | enum | ✅ | news / personal |
| title | string | ✅ | タイトル |
| body | string | ✅ | 本文 |
| imageUrl | string | - | 画像URL |
| linkUrl | string | - | リンクURL |
| createdAt | datetime | ✅ | |

### NotificationSettings

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| userId | string | ✅ | ユーザーID |
| pushEnabled | boolean | ✅ | プッシュ通知ON/OFF |
| categories | object | ✅ | カテゴリ別ON/OFF |

**既読管理**: lastReadAt + readAt の併用方式
**新規ユーザー**: createdAt >= user.createdAt でフィルタリング

---

## 4-14. Board（掲示板）

> **MVPでは実装しない**

---

## 4-15. Category（カテゴリ）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| userId | string | ✅ | ユーザーID |
| scope | enum | ✅ | book / catalog |

| order | number | ✅ | 表示順 |
| isDefault | boolean | ✅ | 既定カテゴリか |
| isHidden | boolean | ✅ | 非表示か |
| colorTheme | string | - | 色テーマ |



**制約**:
- name最大文字数: **20**
- 表示件数上限: **8件**
- 「すべて」: UIの擬似カテゴリ（DBに持たない、固定表示）

**削除/編集ルール**:
- 既定カテゴリ（isDefault=true）: 削除不可、非表示は可能
- ユーザー追加カテゴリ: 削除可、名称変更可
- 並び替え: order更新で可能

---

## 4-16. RecipeBookEntry（レシピ帳エントリ/保存）

| フィールド | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| id | string | ✅ | ULID |
| userId | string | ✅ | レシピ帳の持ち主 |
| itemType | enum | ✅ | recipe / set |
| itemId | string | ✅ | Recipe.id / RecipeSet.id |
| source | enum | ✅ | own / catalog |
| categoryId | string | - | カテゴリID（未分類はnull） |
| savedAt | datetime | ✅ | 保存日時 |
| createdAt | datetime | ✅ | |
| updatedAt | datetime | ✅ | |

**保存の方式**: **ブックマーク参照**
- 保存 = Recipe/RecipeSet を複製しない
- RecipeBookEntry が itemId を参照するだけ
- カタログ側が更新されたら、保存済みにも反映
- 保存したアイテムは編集不可（read-only）
- 保存解除したときの動きはどうなる？？参照しなくなるというだけ？？

**制約**:
- 重複禁止: 同一 userId + itemType + itemId は1件のみ

**isSaved判定**: RecipeBookEntry の存在で算出
---

# 5. 状態遷移（ステートマシン）凍結

## 5-1. 献立（PlanItem）

```
todo ⇄ cooked（戻せる: はい）
```
- cooked の定義: 「つくった！」ボタンを押下した時点

## 5-2. 公開（CatalogPublish）※MVP外

```
draft → published ⇄ stopped
```
- 再公開: OK

## 5-3. Purchase

```
confirm → succeeded → saved（保存促しモーダル）
```

## 5-4. Subscription

```
active → canceled
```
- past_due: MVP対象外

---

# 6. API契約（エンドポイント一覧：凍結）

> 詳細は「API仕様定義書_埋め込み済み.md」を参照

## 6-1. Auth（認証）
- GET /auth/session - セッション取得
- POST /auth/callback - OAuth コールバック
- POST /auth/refresh - トークン更新
- POST /auth/logout - ログアウト

## 6-2. User（ユーザー）
- GET /me - 自分取得
- PATCH /me - 自分更新（name, avatarUrl）

## 6-3. Core（献立/買い物/冷蔵庫）
- GET /plan - 現在の献立取得
- POST /plan/select-set - セット適用
- POST /plan/advance - 献立昇格
- PATCH /plan/items/{id} - 作ったトグル
- GET /shopping-list - 買い物リスト取得
- POST /shopping-list/items - 手動追加
- PATCH /shopping-list/items/{id} - チェック
- DELETE /shopping-list/items/{id} - 削除
- POST /shopping-list/complete - 買い物完了
- GET /fridge - 冷蔵庫取得
- POST /fridge/items - 追加
- PATCH /fridge/items/{id} - 編集
- DELETE /fridge/items/{id} - 削除
- GET /fridge/deleted - 削除履歴
- POST /fridge/items/{id}/restore - 復元

## 6-4. Recipe / Set（レシピ帳）
- GET /recipes - 一覧取得
- GET /recipes/{id} - 詳細取得
- POST /recipes - 新規作成
- PATCH /recipes/{id} - 編集
- DELETE /recipes/{id} - 削除
- GET /sets - 一覧取得
- GET /sets/{id} - 詳細取得
- POST /sets - 新規作成
- PATCH /sets/{id} - 編集
- DELETE /sets/{id} - 削除

## 6-5. Import（取り込み）
- POST /import/parse - URL/テキストからレシピ抽出

## 6-6. Catalog（レシピカタログ）
- GET /catalog/recipes - 一覧取得
- GET /catalog/sets - 一覧取得
- GET /catalog/recipes/{id} - 詳細取得
- GET /catalog/sets/{id} - 詳細取得
- POST /catalog/recipes/{id}/save - 保存
- DELETE /catalog/recipes/{id}/save - 保存解除
- POST /catalog/sets/{id}/save - 保存
- DELETE /catalog/sets/{id}/save - 保存解除
- POST /catalog/recipes/{id}/purchase - 購入
- POST /catalog/sets/{id}/purchase - 購入

## 6-7. Share（外部共有）
- POST /share - 共有URL生成
- GET /share/recipe/{id} - 共有レシピ取得（認証不要）
- GET /share/set/{id} - 共有セット取得（認証不要）

## 6-8. Category（カテゴリ）
- GET /categories - 一覧取得
- POST /categories - 追加
- PATCH /categories/{id} - 更新
- DELETE /categories/{id} - 削除

## 6-9. Archive（アーカイブ）
- GET /archive - 月別カレンダーデータ
- GET /archive/{date} - 日別詳細

## 6-10. Payment（決済）
- POST /payment-methods - クレカ登録
- GET /payment-methods - 一覧取得
- DELETE /payment-methods/{id} - 削除
- POST /purchases - 購入実行
- GET /purchases - 購入履歴

## 6-11. Subscription（サブスク）
- POST /subscriptions - 開始
- GET /subscriptions - 状況取得
- DELETE /subscriptions - 解約

## 6-12. Notification（通知）
- GET /notifications - 一覧取得
- POST /notifications/read - 既読にする
- POST /push-tokens - デバイストークン登録
- DELETE /push-tokens/{token} - トークン削除
- GET /notification-settings - 設定取得
- PATCH /notification-settings - 設定変更

---

# 7. 一覧の検索/並び替え/絞り込み（凍結）

## 7-1. レシピ帳

- search: title / tags / authorName
- sort: newest / oldest / popular
- filter: categoryId（book）/ tags

## 7-2. レシピカタログ

- search: title / tags / creatorName
- sort: newest / popular / recommended
- filter:
  - status: free / paid / purchased
  - cookTime: 15 / 30 / 45（分以内）
  - tags
  - creatorId

**人気定義**: **savedCount**（MVP）

---

# 8. エラー/バリデーション（凍結）

## 共通エラー形式

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "入力内容に誤りがあります",
    "details": [
      { "field": "title", "message": "タイトルは必須です" }
    ]
  }
}
```

## ステータスコード方針

| ステータス | 用途 |
|-----------|------|
| 400 | 形式エラー（JSONパース失敗等） |
| 401 | 認証エラー |
| 403 | 権限エラー |
| 404 | リソースなし |
| 409 | 二重作成/状態不整合 |
| 422 | バリデーションエラー |
| 429 | レート超過 |
| 500 | サーバーエラー |

## 主要エラーコード

| コード | ステータス | 用途 |
|--------|-----------|------|
| INVALID_REQUEST | 400 | JSONパースエラー等 |
| UNAUTHORIZED | 401 | 認証エラー |
| FORBIDDEN | 403 | 権限エラー |
| NOT_FOUND | 404 | リソースなし |
| CONFLICT | 409 | 重複登録 |
| VALIDATION_ERROR | 422 | バリデーションエラー |
| RATE_LIMITED | 429 | レート超過 |
| INTERNAL_ERROR | 500 | サーバーエラー |

---

# 9. "凍結した"判定チェック（着手OK条件）

- [x] エンティティ（Recipe/Set/Plan/Shopping/Fridge）のフィールドが埋まった
- [x] 公開（free/paid/member_only）と価格の扱いが決まった
- [x] アカウントタイプと権限マトリクスが埋まった
- [x] 合算キー（材料×単位）と正規化ルールが決まった
- [x] エラー形式が決まった
- [x] MVPでやらない機能（Out of scope）が明記された

---

# 10. Out of scope（今回やらない＝バックエンドも作らない）

- 診断（Diagnosis）API - 機能自体をMVP外
- 公開API（POST /publish, POST /publish/stop）- 公式レシピは直接DB投入
- クリエイター機能（登録/プロフィール/Connect）
- メンバーシップ機能（加入/決済）
- 掲示板
- フォロー機能

---

# 11. 変更ログ（契約が変わったらここに書く）

| 日付 | 変更点 | 影響範囲 | 対応者 |
|------|--------|----------|--------|
| 2026-01-27 | MVPフロントUI実装完了 / モノレポ化 / 契約凍結シート追記 | UI/API | - |
| 2026-01-27 | 契約凍結シート追記修正 | UI/API | ゆうか |
| 2026-01-28 | API仕様詳細定義完了 / ID方式ULID確定 / advance・カテゴリ・保存解除・User更新API追加 / Out of scope確定（診断・公開API） | DB/API | - |
| 2026-01-28 | 契約凍結シート分離（テンプレート / 埋め込み済み） | ドキュメント | - |
| 2026-01-29 | Notionの凍結シートにいつきさん分取り込み | ドキュメント | - |
| 2026-02-05 | 冷蔵庫・買い物リスト仕様変更: quantity型をstringに統一 | DB/API | いつき |
| 2026-02-06 | 買い物リスト仕様修正: 単位一致時は冷蔵庫から差し引く、単位不一致時は「冷蔵庫にある食材」セクションに参考表示、生成タイミングを「表示時」に変更 | API/UI | いつき |
